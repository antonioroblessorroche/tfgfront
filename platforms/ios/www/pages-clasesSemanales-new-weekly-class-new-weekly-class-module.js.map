{"version":3,"sources":["./src/app/pages/clasesSemanales/new-weekly-class/new-weekly-class.page.ts","./src/app/models/mondayData.ts","./src/app/pages/clasesSemanales/new-weekly-class/new-weekly-class.module.ts","./src/app/pages/clasesSemanales/new-weekly-class/new-weekly-class.page.scss","./src/app/pages/clasesSemanales/new-weekly-class/new-weekly-class.page.html","./src/app/models/generateClass.ts","./src/app/pages/clasesSemanales/new-weekly-class/new-weekly-class-routing.module.ts"],"names":[],"mappings":"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","file":"pages-clasesSemanales-new-weekly-class-new-weekly-class-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { GenerateClass } from 'src/app/models/generateClass';\nimport { MondayData } from 'src/app/models/mondayData';\nimport { TrainingCenter } from 'src/app/models/trainingCenter';\nimport { WeeklyClassMaster } from 'src/app/models/WeeklyClassMaster';\nimport { TrainingCenterService } from 'src/app/services/training-center.service';\nimport { WeeklyClassesMasterServiceService } from 'src/app/services/weekly-classes-master-service.service';\n\n@Component({\n  selector: 'app-new-weekly-class',\n  templateUrl: './new-weekly-class.page.html',\n  styleUrls: ['./new-weekly-class.page.scss'],\n})\nexport class NewWeeklyClassPage implements OnInit {\n\n  constructor( private classService: WeeklyClassesMasterServiceService,\n    private centerService: TrainingCenterService,\n    private router: Router,\n    private activatedRoute: ActivatedRoute,\n    private toastController: ToastController,\n    private alertController: AlertController) { }\n\n  mondayData: MondayData[] = [];\n  classes: WeeklyClassMaster[] = [];\n  centers: TrainingCenter[] = [];\n  page: number = 0;\n  searchValue: string = '';\n  isEmpty: boolean = true;\n  selectedClass: string = '';\n  selectedWeek: MondayData = null;\n  selectedTime: number = 0;\n  selectedCenter: string = '';\n\n\n  ngOnInit() {\n    this.selectedClass = '';\n    this.selectedWeek = null;\n    this.getMondays();\n    this.cargar();\n  }\n\n  cargar(): void {\n    const id = this.activatedRoute.snapshot.params.id;\n    this.cargarClasesMaestras();\n    this.cargarCenters()\n  }\n\n  cargarClasesMaestras() {\n    this.classService.listaMasterAll(1000).subscribe(\n      data => {\n        this.classes = data.content;\n      }, err => {\n        this.volver();\n      }\n    );\n  }\n\n  cargarCenters() {\n    this.centerService.lista(100).subscribe(data => {\n      this.centers = data.content;\n    }, err => {\n      console.log(err);\n      this.presentToast('Error cargando centros de entrenamiento');\n    });\n  }\n\n  selectTemplateId(event) {\n    this.selectedClass = event.value.id;\n   }\n\n   selectCenterId(event) {\n    this.selectedCenter = event.value.id;\n   }\n\n   selectWeek(event) {\n     console.log(event);\n    this.selectedWeek = event.value;\n   }\n\n  createNew() {\n      if ( this.selectedClass == '' || this.selectedWeek == null) {\n        this.presentToast('PLANTILLA Y SEMANA SON CAMPOS OBLIGATORIOS');\n      }\n\n      var generateClass =\n        new GenerateClass(this.selectedWeek.name, this.selectedWeek.date.getTime(), this.selectedClass, this.selectedClass);\n\n    this.classService.copyFrom(generateClass).subscribe(\n      data => {\n        this.presentToast('Nueva clase semanal generada correctamente.')\n        this.cargar();\n      }, err => {\n        this.presentToast('Error generando nueva clase semanal.')\n        this.volver();\n      }\n    );\n  }\n\n\n  getWorkouts() {\n   this.classes = [];\n    this.page = 0;\n    if (this.searchValue != '') {\n      this.classService.listaByNameMaster(0, this.searchValue).subscribe(\n        data => {\n         this.classes = data.content;\n          this.isEmpty = data.content === [];\n        },\n        err => {\n          console.log(\"petó\");\n          console.log(err);\n        }\n      );\n    } else {\n      this.cargar();\n    }\n    this.page+=1;\n    \n  }\n\n  volver() {\n    this.router.navigate(['/']);\n  }\n\n  espMonthName(month: number) : string {\n    switch (month) {\n      case 0: return 'Enero'; break;\n      case 1: return 'Febrero'; break;\n      case 2: return 'Marzo'; break;\n      case 3: return 'Abril'; break;\n      case 4: return 'Mayo'; break;\n      case 5: return 'Junio'; break;\n      case 6: return 'Julio'; break;\n      case 7: return 'Agosto'; break;\n      case 8: return 'Septiembre'; break;\n      case 9: return 'Octubre'; break;\n      case 10: return 'Noviembre'; break;\n      case 11: return 'Diciembre'; break;\n      default: return '';\n    }\n  }\n\n  getMondays() {\n    this.mondayData = [];\n    var day_info = 8.64e+7\n    var d = new Date();\n    var auxDate;\n    var name;\n    d.setDate(d.getDate() + ((7-d.getDay())%7+1) % 7);\n    for (let i = 0; i < 12; i++) {\n      auxDate = new Date(d.getTime() + day_info*7*i);\n      name = 'Semana Lunes ' + auxDate.getDate() + ' de ' + this.espMonthName(auxDate.getMonth());//Day of month\n      console.log(name);\n      this.mondayData.push(new MondayData(name, auxDate));\n    }\n  }\n\n  async presentToast(mensaje: string) {\n    const toast = await this.toastController.create({\n      message: mensaje,\n      duration: 2000,\n      position: 'middle'\n    });\n    toast.present();\n  }\n\n}\n","export class MondayData {\n    name: string;\n\tdate: Date;\n\n\tconstructor(name: string, date: Date ) {\n\t\tthis.name = name;\n\t\tthis.date = date;\n\t}\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { IonicSelectableModule } from 'ionic-selectable';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { NewWeeklyClassPageRoutingModule } from './new-weekly-class-routing.module';\nimport { NewWeeklyClassPage } from './new-weekly-class.page';\n\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NewWeeklyClassPageRoutingModule,\n    ComponentsModule,\n    IonicSelectableModule\n  ],\n  declarations: [NewWeeklyClassPage]\n})\nexport class NewWeeklyClassPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXctd2Vla2x5LWNsYXNzLnBhZ2Uuc2NzcyJ9 */\";","export default \"<app-header title=\\\"Clases Semanales\\\"></app-header>\\n\\n<ion-content>\\n   \\n    <form #f=\\\"ngForm\\\" (ngSubmit)=\\\"onCreate()\\\" novalidate>\\n    <ion-list lines=\\\"full\\\" class=\\\"ion-no-margin\\\">\\n        <ion-list-header lines=\\\"full\\\">\\n          <ion-label>\\n            Creacion de clases semanales\\n          </ion-label>\\n        </ion-list-header>\\n\\n        <ion-item>\\n          <ion-label>Semana:</ion-label>\\n          <ionic-selectable\\n          \\n            [items]=\\\"mondayData\\\"\\n            itemValueField=\\\"name\\\"\\n            itemTextField=\\\"name\\\"\\n            [canSearch]=\\\"true\\\"\\n            (onChange)=\\\"selectWeek($event)\\\">\\n          </ionic-selectable>\\n        </ion-item>\\n\\n        <ion-item>\\n          <ion-label>Plantilla semanal:</ion-label>\\n          <ionic-selectable\\n          \\n            [items]=\\\"classes\\\"\\n            itemValueField=\\\"id\\\"\\n            itemTextField=\\\"name\\\"\\n            [canSearch]=\\\"true\\\"\\n            (onChange)=\\\"selectTemplateId($event)\\\">\\n          </ionic-selectable>\\n        </ion-item>\\n\\n        <!-- <ion-item>\\n          <ion-label>Centro:</ion-label>\\n          <ionic-selectable\\n          \\n            [items]=\\\"centers\\\"\\n            itemValueField=\\\"id\\\"\\n            itemTextField=\\\"name\\\"\\n            [canSearch]=\\\"true\\\"\\n            (onChange)=\\\"selectCenterId($event)\\\">\\n          </ionic-selectable>\\n        </ion-item> -->\\n\\n        <!-- <ion-item>\\n            <ion-label>Centro: </ion-label>\\n            <ion-input  placeholder=\\\"¿En qué centro?\\\" name=\\\"description\\\" [(ngModel)]=\\\"description\\\"></ion-input>\\n        </ion-item> -->\\n      </ion-list>\\n\\n      <div class=\\\"ion-padding\\\">\\n        <ion-button color=\\\"success\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" [disabled]=\\\"!f.valid\\\" (click)=\\\"createNew()\\\"> \\n            <ion-icon name=\\\"create\\\">  </ion-icon>\\n            Generar\\n             </ion-button>\\n     </div>\\n     <!-- <div class=\\\"ion-padding\\\">\\n        <ion-button color=\\\"secondary\\\" expand=\\\"block\\\" (click)=\\\"vaciar()\\\" class=\\\"ion-no-margin\\\"> \\n            <ion-icon name=\\\"refresh-circle\\\">  </ion-icon>\\n            Reset\\n             </ion-button>\\n     </div> -->\\n     \\n  </form>\\n\\n  \\n\\n</ion-content>\\n\";","export class GenerateClass {\n    week: string;\n    weekTime: number\n\ttrainingCenterId: string;\n\tclassId: string;\n    constructor(week: string, weekTime: number, trainingCenterId: string, classId: string) {\n        this.week = week;\n        this.trainingCenterId = trainingCenterId;\n        this.classId = classId;\n        this.weekTime = weekTime;\n    }\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewWeeklyClassPage } from './new-weekly-class.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewWeeklyClassPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewWeeklyClassPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}