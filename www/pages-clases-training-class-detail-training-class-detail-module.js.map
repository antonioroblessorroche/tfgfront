{"version":3,"sources":["./src/app/models/trainingClassReservation.ts","./src/app/pages/clases/training-class-detail/training-class-detail.page.scss","./src/app/pages/clases/training-class-detail/training-class-detail-routing.module.ts","./src/app/pages/clases/training-class-detail/training-class-detail.module.ts","./src/app/pages/clases/training-class-detail/training-class-detail.page.ts","./src/app/pages/clases/training-class-detail/training-class-detail.page.html"],"names":[],"mappings":"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","file":"pages-clases-training-class-detail-training-class-detail-module.js","sourcesContent":["export class TrainingClassReservation {\n    id?: string;\n\tuser: string;\n    classId: string;\n\ttime: number;\n\tsessionId: string;\n\tuserFullName: String;\n\n\tconstructor(user: string, classId: string, classTime: number, className: string) {\n\t\tthis.user = user;\n\t\tthis.classId = classId;\n\t\tthis.time = classTime;\n\t\tthis.userFullName = className;\n\t}\n\n}","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0cmFpbmluZy1jbGFzcy1kZXRhaWwucGFnZS5zY3NzIn0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TrainingClassDetailPage } from './training-class-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TrainingClassDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TrainingClassDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TrainingClassDetailPageRoutingModule } from './training-class-detail-routing.module';\n\nimport { TrainingClassDetailPage } from './training-class-detail.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TrainingClassDetailPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [TrainingClassDetailPage]\n})\nexport class TrainingClassDetailPageModule {}\n","import { Token } from '@angular/compiler/src/ml_parser/lexer';\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\nimport { TrainingClass } from 'src/app/models/trainingClass';\nimport { TrainingClassReservation } from 'src/app/models/trainingClassReservation';\nimport { TokenService } from 'src/app/services/token.service';\nimport { TrainingClassService } from 'src/app/services/trainingclass.service';\n\n@Component({\n  selector: 'app-training-class-detail',\n  templateUrl: './training-class-detail.page.html',\n  styleUrls: ['./training-class-detail.page.scss'],\n})\nexport class TrainingClassDetailPage implements OnInit {\n\n  trainingClass: TrainingClass;\n\n  constructor(\n    private trainingClassService: TrainingClassService,\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private toastController: ToastController,\n    private tokenService: TokenService\n  ) { }\n\n  ngOnInit() {\n   \n    this.cargar();\n  }\n\n  reservar() : void {\n    const classId = this.activatedRoute.snapshot.params.id;\n    const userName = this.tokenService.getUsername();\n    this.trainingClassService.reservar(new TrainingClassReservation(userName, classId, 0 ,\"\")).subscribe(\n        data => {\n            this.presentToast('Clase reservada!');\n            this.volver();\n        }, err => {\n            this.presentToast(err.error.mensaje);\n        });\n  }\n\n  async presentToast(mensaje: string) {\n    const toast = await this.toastController.create({\n      message: mensaje,\n      duration: 2000,\n      position: 'middle'\n    });\n    toast.present();\n  }\n\n  cargar(): void {\n    const id = this.activatedRoute.snapshot.params.id;\n    this.trainingClassService.detalle(id).subscribe(\n      data => {\n        console.log(id);\n        console.log(data);\n        this.trainingClass = data;\n        this.trainingClass.date = new Date(this.trainingClass.timeStart).toLocaleTimeString();\n      }, err => {\n        this.volver();\n      }\n    )\n  }\n\n  volver(): void {\n    const redirectUrtl = this.tokenService.getAuthorities.length > 1 ? '/classes' : '/classes';\n    this.router.navigate([redirectUrtl]);\n  }\n\n  eliminarReserva(): void {\n    const classId = this.activatedRoute.snapshot.params.id;\n    const userName = this.tokenService.getUsername();\n    this.trainingClassService.deleteReservation(this.trainingClass.reservationId).subscribe(\n        data => {\n            this.presentToast('Reserva eliminada!');\n            this.volver();\n        }, err => {\n            this.presentToast(err.error.mensaje);\n        });\n  }\n\n}\n","export default \"<app-header title=\\\"Clases\\\"></app-header>\\n<ion-content *ngIf=\\\"trainingClass\\\">\\n    <ion-card>\\n        <ion-card-header>\\n            <ion-card-title>{{trainingClass.name}}\\n            </ion-card-title>\\n            <ion-card-subtitle>{{trainingClass.date}} <ion-text color=\\\"danger\\\" *ngIf=\\\"trainingClass.available==false\\\">\\n                    (No disponible) </ion-text>\\n            </ion-card-subtitle>\\n        </ion-card-header>\\n        <ion-card-content class=\\\"ion-text-justify\\\">\\n            {{trainingClass.comments}}\\n            <ion-text color=\\\"danger\\\" *ngIf=\\\"trainingClass.available==false\\\"> <br> No quedan plazas disponibles\\n            </ion-text>\\n        </ion-card-content>\\n    </ion-card>\\n    <ion-content *ngIf=\\\"!trainingClass.reservationId\\\">\\n        <div class=\\\"ion-padding\\\">\\n            <ion-button color=\\\"success\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" (click)=\\\"reservar()\\\">\\n                <ion-icon name=\\\"add-circle\\\"> </ion-icon>\\n                &nbsp; Inscribeme!\\n            </ion-button>\\n        </div>\\n        <div class=\\\"ion-padding\\\">\\n            <ion-button color=\\\"tertiary\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" (click)=\\\"volver()\\\">\\n                <ion-icon name=\\\"arrow-back-circle\\\"> </ion-icon>\\n                &nbsp; Volver\\n            </ion-button>\\n        </div>\\n    </ion-content>\\n    <ion-content *ngIf=\\\"trainingClass.reservationId\\\">\\n        <div class=\\\"ion-padding\\\">\\n            <ion-button color=\\\"danger\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" (click)=\\\"eliminarReserva()\\\">\\n                <ion-icon name=\\\"close-circle\\\"> </ion-icon>\\n                &nbsp; Eliminar reserva!\\n            </ion-button>\\n        </div>\\n        <div class=\\\"ion-padding\\\">\\n            <ion-button color=\\\"tertiary\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\" (click)=\\\"volver()\\\">\\n                <ion-icon name=\\\"arrow-back-circle\\\"> </ion-icon>\\n                &nbsp; Volver\\n            </ion-button>\\n        </div>\\n    </ion-content>\\n</ion-content>\\n\\n<ion-content *ngIf=\\\"!trainingClass\\\">\\n    <ion-card>\\n        <ion-card-header>\\n            <ion-card-title>\\n                <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n            </ion-card-title>\\n            <ion-card-subtitle>\\n                <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n            </ion-card-subtitle>\\n        </ion-card-header>\\n        <ion-card-content class=\\\"ion-text-justify\\\">\\n            <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n            <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n            <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n            <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\n        </ion-card-content>\\n    </ion-card>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}